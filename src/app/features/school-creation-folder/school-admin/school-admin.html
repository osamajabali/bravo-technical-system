<div class="card">
    <div class="card-header bg-primary text-white">
        <h4>Add Admin, Grades & Subjects</h4>
    </div>
    <div class="card-body">
            <form #adminForm="ngForm" AutoFormError (ngSubmit)="onSubmit()">
            @for (field of fields(); let i = $index; track i) {
                <div class="form-group border p-2">
                    <div class="row my-2">

                        <div class="col-md-4">
                            <label for="nameEnglishFirst{{i}}">First Name (English)</label>
                            <input type="text" class="form-control" id="nameEnglishFirst{{i}}" name="nameEnglishFirst{{i}}" [(ngModel)]="field.nameEnglishFirst" required />
                        </div>
                        <div class="col-md-4">
                            <label for="nameEnglishMiddle{{i}}">Middle Name (English)</label>
                            <input type="text" class="form-control" id="nameEnglishMiddle{{i}}" name="nameEnglishMiddle{{i}}" [(ngModel)]="field.nameEnglishMiddle" required />
                        </div>
                        <div class="col-md-4">
                            <label for="nameEnglishLast{{i}}">Last Name (English)</label>
                            <input type="text" class="form-control" id="nameEnglishLast{{i}}" name="nameEnglishLast{{i}}" [(ngModel)]="field.nameEnglishLast" required />
                        </div>
                    </div>
                    <div class="row my-2">
                        <div class="col-md-4">
                            <label for="nameArabicFirst{{i}}">First Name (Arabic)</label>
                            <input type="text" class="form-control" id="nameArabicFirst{{i}}" name="nameArabicFirst{{i}}" [(ngModel)]="field.nameArabicFirst" required />
                        </div>
                        <div class="col-md-4">
                            <label for="nameArabicMiddle{{i}}">Middle Name (Arabic)</label>
                            <input type="text" class="form-control" id="nameArabicMiddle{{i}}" name="nameArabicMiddle{{i}}" [(ngModel)]="field.nameArabicMiddle" required />
                        </div>
                        <div class="col-md-4">
                            <label for="nameArabicLast{{i}}">Last Name (Arabic)</label>
                            <input type="text" class="form-control" id="nameArabicLast{{i}}" name="nameArabicLast{{i}}" [(ngModel)]="field.nameArabicLast" required />
                        </div>
                        <div class="col-md-4">  
                            <label for="genderId{{i}}">Gender</label>
                            <ng-select
                                id="genderId{{i}}"
                                name="genderId{{i}}"
                                [(ngModel)]="field.genderId"
                                bindLabel="name"
                                bindValue="id"
                                [items]="[
                                    { id: 0, name: 'Select Gender' },
                                    { id: 1, name: 'Male' },
                                    { id: 2, name: 'Female' }
                                ]"
                                placeholder="Select Gender"
                                required>
                            </ng-select>
                        </div>
                        <div class="col-md-4">
                            <label for="email{{i}}">Email</label>
                            <input type="email" class="form-control" id="email{{i}}" name="email{{i}}" [(ngModel)]="field.email" required />
                        </div>
                        <div class="col-md-4">
                            <label for="phoneNumber{{i}}">Phone Number</label>
                            <input type="text" class="form-control" id="phoneNumber{{i}}" name="phoneNumber{{i}}" [(ngModel)]="field.phoneNumber" />
                        </div>
                    </div>
                    <div class="row my-2">
                        <div class="col-md-6">
                            <label for="assignedGrades{{i}}">Assigned Grades</label>
                            <ng-select
                                id="assignedGrades{{i}}"
                                name="assignedGrades{{i}}"
                                [(ngModel)]="field.gradeSubjects[0].gradeId"
                                bindLabel="name"
                                bindValue="id"
                                [items]="grades()"
                                placeholder="Select Grades"
                                required>
                            </ng-select>
                        </div>
                        <div class="col-md-6">
                            <label for="assignedSubjects{{i}}">Assigned Subjects</label>
                            <ng-select
                                id="assignedSubjects{{i}}"
                                name="assignedSubjects{{i}}"
                                [(ngModel)]="field.gradeSubjects[0].subjectIds"
                                bindLabel="name"
                                bindValue="id"
                                [items]="subjects()"
                                placeholder="Select Subjects"
                                [multiple]="true"
                                required>
                            </ng-select>
                        </div>
                    </div>
                    @if (fields().length > 1) {
                    <div class="row my-2">
                        <div class="col-md-12">
                            <button class="btn text-danger" type="button" (click)="removeField(i)">Remove Field</button>
                        </div>
                    </div>
                    }
                </div>
            }
            <button class="btn text-primary" type="button" (click)="addField()">Add Admin</button>
        </form>
    </div>
</div>
